### **通信系统基础**

#### **1. 核心概念：数据与信号的转换**

通信系统的根本任务是将数据（信息）从一端传输到另一端，这通常需要将数据转换为适合在信道中传输的信号。主要有四种转换技术：

1.  **模拟-数字转换 (Analog-to-Digital Conversion, ADC)**：将模拟数据（如语音、传感器读数）转换为数字信号。这是本讲的重点之一。
2.  **数字-数字转换 (Digital-to-Digital Conversion, DDC)**：将数字数据（比特流）编码成数字信号。这也是本讲的重点之一。
3.  **数字-模拟转换 (Digital-to-Analog Conversion, DAC)**：将数字数据调制成模拟信号，常用于无线通信或通过带宽受限的模拟信道传输（如电话线上的调制解调器）。技术包括 ASK、FSK、PSK。
4.  **模拟-模拟转换 (Analog-to-Analog Conversion, AAC)**：将一个模拟信号（通常是低频信号）调制到一个更高频率的载波上，如 AM/FM 广播。

*   **Codec (编码器/解码器)**：执行模拟数据与数字信号之间转换的设备。
*   **Modem (调制器/解调器)**：执行数字数据与模拟信号之间转换的设备。

---

### **第一部分：模拟-数字转换 (ADC)**

ADC，也称为**数字化 (Digitization)**，是将连续的模拟数据（如声音）转换为离散的数字数据的过程。最主要的 ADC 技术是 **脉冲编码调制 (Pulse Code Modulation, PCM)**。

#### **1.1 脉冲编码调制 (PCM)**

PCM 编码器包含三个核心步骤：**采样、量化和编码**。

##### **A. 采样 (Sampling)**

采样是 ADC 的第一步，它以固定的时间间隔（采样周期 `Ts`）测量模拟信号的幅度。

*   **采样率 (Sampling Rate)**：每秒采样的次数，即 `fs = 1/Ts`。
*   **采样方法**：
    *   **理想采样 (Ideal Sampling)**：在每个采样瞬间获取一个精确的、无限窄的脉冲，理论上存在但难以实现。
    *   **自然采样 (Natural Sampling)**：在短时间内对信号进行采样，得到的脉冲顶部保持原始信号的形状。
    *   **平顶采样 (Flat-top Sampling)**：也称为**采样并保持 (Sample and Hold)**，是目前最常用的方法。它在采样瞬间获取信号的幅度，并在整个采样周期内保持该值不变，形成一个阶梯状的信号。
*   **脉冲幅度调制 (Pulse Amplitude Modulation, PAM)**：采样过程的输出是一系列幅度各异的脉冲，称为 PAM 信号。注意，此时的 PAM 信号仍然是模拟的，因为其幅度可以是任意连续值。

##### **B. 奈奎斯特定理 (Nyquist Theorem)**

为了能够从采样后的信号中无失真地恢复原始模拟信号，必须满足奈奎斯特定理：
> **采样率 `fs` 必须至少是原始信号最高频率 `f_max` 的两倍。**
> `fs ≥ 2 * f_max`

*   **带限信号**：只有带宽有限的信号才能被采样。
*   **欠采样 (Undersampling)**：如果 `fs < 2 * f_max`，恢复出的信号会产生混叠失真，无法代表原始信号。时钟的例子直观地说明了这一点：如果对秒针的采样率低于每 30 秒一次，你可能无法判断秒针是在前进还是后退。
*   **过采样 (Oversampling)**：`fs > 2 * f_max`。可以无失真恢复信号，但会产生冗余数据，增加数据处理量。

**示例**：人声的频率通常被限制在 4000 Hz 以下。因此，电话系统使用的标准采样率是 8000 次/秒（8 kHz），以满足奈奎斯特定理。

##### **C. 量化 (Quantization)**

量化是 PCM 的第二步，也是引入误差的主要环节。它将采样得到的连续幅度值近似为有限个离散的、预定义的级别。

*   **量化步骤**：
    1.  确定信号的幅度范围（从 `V_min` 到 `V_max`）。
    2.  将该范围划分为 `L` 个量化级别（或区域）。
    3.  每个级别的高度为 `Δ = (V_max - V_min) / L`。
    4.  将每个采样点的实际幅度值，归入其所在的量化级别，并用该级别的预定值（通常是中点值）来表示。
*   **量化误差 (Quantization Error)**：原始采样值与量化后的近似值之间的差值。这个误差是不可避免的，其最大值不超过 `Δ/2`。
*   **量化级别与比特数**：`L` 个量化级别需要 `n_b` 个比特来表示，其中 `n_b = log₂(L)`。例如，8 个级别需要 3 比特 (`2³=8`)。
    *   增加 `L`（和 `n_b`）可以减小 `Δ`，从而降低量化误差，提高信号质量，但代价是**比特率会增加**。
    *   在音频数字化中，`L` 通常选为 256（对应 `n_b = 8` 比特）。

##### **D. 编码 (Encoding)**

编码是 PCM 的最后一步。它将每个量化后的级别值转换成一个 `n_b` 比特的二进制码字。

*   **比特率 (Bit Rate)**：数字化后每秒产生的数据量。
    > **Bit Rate = 采样率 (fs) × 每个样本的比特数 (n_b)**
    *   **示例**：电话语音的比特率 = 8000 samples/s × 8 bits/sample = 64,000 bps 或 64 kbps。

##### **E. PCM 的信号-噪声比 (SNR)**

量化误差等同于在信号中加入了噪声。信号的质量通常用信噪比（SNR）来衡量，单位是分贝 (dB)。对于 PCM，信噪比的计算公式为：
> **SNR_dB ≈ 6.02 * n_b + 1.76**

这个公式表明，**每个样本每增加一个比特，信噪比大约提高 6 dB**。

##### **F. 非均匀量化与压扩 (Companding)**

对于语音等信号，小幅度值出现的概率远大于大幅度值。在**均匀量化**中，固定的量化间隔 `Δ` 对小信号会造成更大的相对误差。
为了解决这个问题，采用了**非均匀量化**，即在小信号区域使用更精细的量化级别（更小的 `Δ`），在大信号区域使用较粗的级别。这可以通过**压扩 (Companding)** 技术实现：在发送端（编码器）压缩信号的动态范围，在接收端（解码器）进行扩展，从而恢复原始信号。

##### **G. PCM 解码器**

解码器负责将 PCM 比特流恢复为模拟信号。它首先将码字转换回一系列具有量化幅度的脉冲，形成一个**阶梯信号**，然后通过一个**低通滤波器**将阶梯信号平滑化，从而重建原始的模拟信号。

#### **1.2 增量调制 (Delta Modulation, DM)**

DM 是 PCM 的一种简化替代方案，特别适用于变化平缓的信号。

*   **工作原理**：DM 不传输每个样本的绝对幅度值，而是传输当前样本与前一个样本值之间的**差异**或**变化趋势**。
*   它使用一个内部的“阶梯”信号来跟踪原始信号。在每个采样点，比较原始信号与阶梯信号的幅度：
    *   如果原始信号**高于**阶梯信号，输出 `1`，阶梯信号向上移动一个固定步长 `δ`。
    *   如果原始信号**低于**阶梯信号，输出 `0`，阶梯信号向下移动一个固定步长 `δ`。
*   **优点**：实现简单，每个样本只发送 1 比特。
*   **缺点**：当信号变化剧烈时，阶梯信号跟不上，会产生**斜率过载误差 (Slope Overload Error)**。当信号平坦时，阶梯信号会在真实值上下波动，产生**颗粒噪声 (Granular Noise)**。

#### **1.3 差分 PCM (DPCM)**

DPCM 是对 DM 的改进。它同样是预测下一个采样值与真实值之间的差异，但它使用多个比特来量化这个差异，而不是像 DM 那样只用 1 比特。这使得 DPCM 能够更准确地表示信号的较大变化，从而提高了精度。

---

### **第二部分：数字-数字转换 (DDC)**

DDC，也称为**线路编码 (Line Coding)**，是将二进制数据（0和1）转换为适合在物理介质（如电缆）上传输的数字信号（电压脉冲）的过程。

#### **2.1 线路编码的核心问题与要求**

一个好的线路编码方案需要解决以下问题：

1.  **信号定时与同步 (Self-Synchronization)**：接收方的时钟必须与发送方的时钟同步，才能正确地判断每个比特的起止。如果时钟发生漂移，接收方可能会多读或漏读比特。好的编码方案应在信号中包含定时信息，允许接收方自同步。
2.  **直流分量 (DC Component)**：一长串连续的 `0` 或 `1` 会导致电压长时间保持恒定，这会在信号频谱中产生接近零赫兹的低频或直流分量。某些传输系统（如使用变压器耦合的系统）无法传输直流分量，会导致信号失真。
3.  **基线漂移 (Baseline Wandering)**：接收方通过计算接收信号功率的长期平均值来确定一个“基线”，并以此为参考来判决 `0` 和 `1`。长串的 `0` 或 `1` 会使这个基线发生漂移，导致判决错误。
4.  **带宽**：不同的编码方案所需的带宽不同。通常，每比特信号变化次数越多，所需带宽就越大。
5.  **错误检测能力**：某些编码规则可以提供内置的错误检测能力。
6.  **复杂性与成本**：更复杂的编码方案需要更昂贵的硬件来实现。

#### **2.2 主要的线路编码方案**

##### **A. 单极性编码 (Unipolar)**

*   **NRZ (Non-Return-to-Zero)**：所有信号电压都在时间轴的一侧（例如，`1` 用正电压，`0` 用零电压表示）。
    *   **缺点**：实现简单但有严重的直流分量问题，且长串的 `0` 或 `1` 都会导致同步丢失。因其功耗较高，现代通信中已很少使用。

##### **B. 极性编码 (Polar)**

电压在时间轴的两侧跳变。

*   **NRZ (Non-Return-to-Zero)**
    *   **NRZ-L (Level)**：电平本身代表数据。例如，正电平代表 `0`，负电平代表 `1`。
    *   **NRZ-I (Invert)**：**电平的跳变**代表数据。例如，遇到 `1` 时电平翻转，遇到 `0` 时电平保持不变。NRZ-I 在传输长串 `1` 时优于 NRZ-L，因为它能提供跳变来帮助同步。
    *   **NRZ 共同缺点**：两者都有直流分量问题。长串的 `1` (对NRZ-L) 或 `0` (对NRZ-L和NRZ-I) 都会导致同步丢失。
*   **RZ (Return-to-Zero)**
    *   信号在每个比特周期的中间都会返回到零电平。`1` 表现为正脉冲后归零，`0` 表现为负脉冲后归零。
    *   **优点**：强制的跳变提供了很好的同步，且没有直流分量。
    *   **缺点**：每个比特需要两次信号跳变，占用的带宽是 NRZ 的两倍，且需要三个电压级别，实现更复杂。

##### **C. 双相编码 (Biphase)**

是局域网（如以太网）中最常用的编码类型。

*   **曼彻斯特编码 (Manchester)**
    *   每个比特周期的中间都有一次电平跳变。这个跳变既用于同步，也用于表示数据。
    *   通常定义为：从高到低的跳变代表 `0`，从低到高的跳变代表 `1`。
*   **差分曼彻斯特编码 (Differential Manchester)**
    *   中间的跳变**仅用于同步**。
    *   数据由比特**开始时是否存在跳变**来决定。例如，开始时有跳变代表 `0`，没有跳变代表 `1`。
*   **双相编码共同优缺点**：
    *   **优点**：完美解决了同步问题（每个比特都有跳变），且没有直流分量。
    *   **缺点**：信号速率是 NRZ 的两倍，因此**带宽需求也是 NRZ 的两倍**。

##### **D. 双极性编码 (Bipolar)**

使用三个电压级别：正、负和零。

*   **AMI (Alternate Mark Inversion - 交替传号反转)**
    *   `0` 用零电平表示。
    *   `1` 用交替出现的正、负电压表示。
    *   **优点**：没有直流分量，带宽与 NRZ 相同。
    *   **缺点**：长串的 `0` 会导致同步丢失。

##### **E. 块编码 (Block Coding)**

为了克服 AMI 等编码中长串 `0` 的同步问题，引入了块编码。它通过增加冗余比特来确保信号中有足够的跳变。

*   **mB/nB 编码**：将 `m` 位的二进制块替换为 `n` 位的码字 (`n > m`)。
*   **4B/5B 编码**：
    *   将每 4 比特数据替换为 5 比特码字。
    *   精心选择 5 位码字，确保**任何码字最多只有 1 个前导零和 2 个后导零**。这样，当码字组合在一起时，最多只会出现 3 个连续的零。
    *   它通常与 NRZ-I 结合使用，解决了 NRZ-I 害怕长串 `0` 的问题。
    *   **缺点**：引入了 `(5-4)/4 = 25%` 的额外开销，导致比特率增加 20%（例如 1 Mbps 数据流变为 1.25 Mbps）。它**没有解决 NRZ-I 的直流分量问题**。

#### **2.3 传输模式**

数据可以通过两种基本模式在设备间传输：

##### **A. 并行传输 (Parallel Transmission)**

*   一次同时传输多个比特（例如 8 比特），每个比特占用一条独立的线路。
*   **优点**：速度快。
*   **缺点**：成本高，线缆复杂，易受串扰影响，通常只用于短距离连接（如计算机内部总线、打印机接口）。

##### **B. 串行传输 (Serial Transmission)**

*   在一个信道上逐个比特地进行传输。
*   **优点**：成本低，适合长距离传输。
*   串行传输有三种子类型：
    1.  **异步传输 (Asynchronous)**
        *   以字节（或字符）为单位进行传输，每个字节前后都带有额外的控制位：一个**起始位 (start bit, 通常为 0)** 和一个或多个**停止位 (stop bits, 通常为 1)**。
        *   字节之间的时间间隔可变。
        *   适用于数据产生不规律的低速通信，如键盘输入。
    2.  **同步传输 (Synchronous)**
        *   将大量数据组合成一个大的数据块或“帧”进行连续传输，没有字节间的间隔和起始/停止位。
        *   接收方负责从连续的比特流中划分出字节。
        *   效率高，速度快，适用于计算机之间的大量数据传输。
    3.  **等时传输 (Isochronous)**
        *   为实时多媒体（音频、视频）应用而设计。
        *   它保证数据以一个恒定、平稳的速率到达，避免了延迟抖动。整个数据流必须被严格同步。