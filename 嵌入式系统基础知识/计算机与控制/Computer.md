好的，遵照您的要求，这是一份对《CNENGR115 计算机与控制：计算机》第二讲的完整、详细的中文笔记。

---

### **CNENGR115 计算机与控制：计算机（第 2/3 讲）**
**主题：选择、架构、关联性与输入/输出 (I/Os)**

---

#### **第一部分：课程回顾与本讲重点**

1.  **第一讲内容回顾 (Revision of Lecture 1)**
    *   **微控制器 (µC)**：是嵌入式系统的一种，它将微处理器、定时器、ADC（模数转换器）等功能集成在**单一硅片**上，用于从“内部”控制事物。
    *   **微控制器的优势**：使得小型、低功耗的可编程设备能够以**低成本、高可靠性且不引人注目**的方式被应用。
    *   **编程与内存**：微控制器可以使用多种语言编程。代码被转换成**机器码 (machine code)** 并存入设备上的**非易失性闪存**中。这种内存可以被反复擦写。
    *   **开发过程**：编程环境支持在将代码烧录到设备前进行**仿真 (simulated)**，以及在设备上进行**调试 (debugged)**。通常，仿真速度快，而调试速度慢。

2.  **本讲焦点：嵌入式系统设计议题**
    嵌入式系统工程师面临两个核心设计问题：
    1.  **选择哪个设备系列 (device family)？**
    2.  **针对特定应用需要哪些外设 (peripherals)？**

---

#### **第二部分：嵌入式系统设计中的选择与考量**

在为项目选择微控制器时，工程师必须权衡多种因素：

*   **宏观考量 (Broader Design Issues):**
    *   **成本 (Cost)**：设备的单价及开发总成本。
    *   **熟悉度 (Familiarity)**：团队对特定设备系列或开发环境的经验。
    *   **集成便利性 (Ease of integration)**：将该设备集成到更大系统中的难易程度。
    *   **外设 (Peripherals)**：设备自带的功能模块是否满足需求。
    *   **现有产品中的使用 (Use in existing products)**：是否可以复用现有设计或库存。
    *   **应用环境兼容性 (Compatibility)**：设备是否能在目标工作环境下（如温度、湿度）稳定运行。
    *   **过时风险 (Obsolescence)**：该设备是否面临停产风险。

*   **具体设备考量 (Specific Options):**
    *   **专用型号 (Dedicated variant)**：是否有专为我的应用设计的特殊型号？
    *   **速度 (Speed)**：处理器的时钟频率。
    *   **封装 (Package)**：芯片的物理形态和尺寸（如DIL, SMD）。
    *   **内存容量 (Memory capacity)**：Flash、RAM的大小。
    *   **功耗 (Power consumption)**：尤其对于电池供电的设备至关重要。
    *   **通信接口**：是否支持 **I2C**, **串行输出 (Serial out)** 等。
    *   **通用输入/输出 (GPIO)**：可用的引脚数量。
    *   **板载ADC**：模数转换器的**速度和分辨率 (resolution)**。

---

#### **第三部分：核心概念——计算机体系结构**

1.  **微控制器的基本工作流程**
    微控制器本质上是一个**信号处理**设备，而非功率设备。其工作流程分为四步：
    1.  **接收 (Receive)**：通过引脚接收外部信息（信号）。
    2.  **编码与存储 (Encode)**：将该信息编码为一个数字，并将其存储在易失性存储器（**RAM**）中。
    3.  **处理 (Process)**：根据存储在（**ROM**）中的程序处理这个数字，并将结果存回内存（**RAM**）。
    4.  **输出 (Output)**：将处理结果以模拟或数字信号的形式输出，以完成有用功。

2.  **信息处理方式的演进**
    *   **模拟计算机**：由特定的电子元件序列构成，只能重复解决一个由该序列决定的问题，缺乏灵活性。
    *   **通用图灵机 (Universal Turing Machine)**：由**艾伦·图灵**提出，其核心思想是将**指令（程序）**和**数据（数字）**存储在同一种介质（磁带）上。这带来了前所未有的灵`活性`，使计算机不仅能处理不同的数据，还能执行不同的程序。

3.  **两种主流的计算机体系结构**

    图灵的理念催生了两种将指令和数据存储在内存中的主流架构：

    *   **冯·诺依曼架构 (Von Neumann Architecture)**：
        *   **特点**：指令和数据共享**同一存储空间**和**同一总线**。
        *   **优点**：内存使用效率高。
        *   **缺点**：无法同时读取指令和数据，导致性能瓶颈（冯·诺依曼瓶颈），速度较慢。
        *   **代表**：Motorola MC68HC08系列。

    *   **哈佛架构 (Harvard Architecture)**：
        *   **特点**：指令和数据拥有**独立的存储空间**和**独立的总线**。
        *   **优点**：可以同时读取指令和数据，执行速度更快。指令存储通常是只读的，更稳定。
        *   **缺点**：内存利用效率较低。
        *   **代表**：AVR系列（改进型哈佛架构）、PIC系列、8051系列。

4.  **指令集架构 (ISAs)**

    *   **精简指令集计算机 (RISC - Reduced Instruction Set Computer)**：
        *   **特点**：指令集小，指令长度固定，执行周期短，晶体管数量少。内存访问受限（需通过专门的加载/存储指令）。
        *   **代表**：Atmel AVR, ARM。
    *   **复杂指令集计算机 (CISC - Complex Instruction Set Computer)**：
        *   **特点**：指令集大，单个指令可完成多个操作，执行周期不等。无需单独的内存加载指令。
        *   **代表**：MC6800, 8051, Z80。

---

#### **第四部分：与控制工程的关联**

1.  **微控制器在控制系统中的角色**
    在一个标准**闭环控制系统**中：
    *   **控制器 (CONTROLLER)** 的角色由**微控制器**扮演。
    *   **传感器 (SENSORS)** 负责检测系统的实际输出，并将信息输入给控制器。
    *   **执行器 (ACTUATORS)** 接收来自控制器的指令（控制输入），并对**被控系统 (SYSTEM)** 施加作用。

2.  **执行器 (Actuators) - 如何输出信号**
    *   我们可用的执行器（如LED、伺服电机、蜂鸣器等）大多需要**数字信号**。
        *   有些是简单的**开/关 (ON/OFF)**。
        *   有些可以通过**脉冲宽度调制 (PWM)** 或通信协议（如SPI, I2C）进行可变控制。
    *   **如果执行器需要模拟信号 (0-5V连续电压)？**
        *   需要使用**数模转换器 (DAC - Digital-to-Analogue Converter)**。DAC将一个数字代码（如8位代表256个级别）转换为一个离散的电压值。
        *   **注意：Arduino Uno没有内置的硬件DAC！** 通常使用PWM来模拟模拟输出。

3.  **传感器 (Sensors) - 如何输入信号**
    *   我们可用的传感器分为两类：
        *   **提供模拟信号**：热敏电阻、光敏电阻、电位器等，其输出是连续变化的电压。
        *   **提供数字信号**：触摸模块、超声波模块、红外接收器等，其输出是开/关或编码数据。
    *   **如果传感器提供模拟信号？**
        *   需要使用**模数转换器 (ADC - Analogue-to-Digital Converter)**。ADC将一个连续的模拟电压转换为一个数字值。
        *   **好消息：Arduino Uno内置了6个ADC！**
            *   **分辨率**为**10位**（2¹⁰ = 1024），因此从ADC读取的原始值范围是 **0 - 1023**。
            *   程序需要将这个原始值**转换为有意义的物理量**（如温度、速度等）。

---

#### **第五部分：常见的微控制器系列（附录）**

*   **Atmel AVR 系列**:
    *   **制造商**: Atmel
    *   **架构**: 改进型哈佛架构, RISC
    *   **特点**: 8位，单芯片微控制器，片上集成Flash, EEPROM, SRAM。执行效率高。
    *   **示例**: **ATmega328P** (Arduino Uno的核心芯片)。

*   **8051 系列**:
    *   **开发商**: Intel (1980年)
    *   **架构**: 内部哈佛架构, CISC
    *   **特点**: 非常经典的系列，有众多供应商和数百种不同型号，包含8/16/32位变体。

*   **Motorola MC68HC08 系列**:
    *   **架构**: 冯·诺依曼架构, CISC
    *   **特点**: 历史悠久的系列。

*   **PIC (Peripheral Interface Controller) 系列**:
    *   **制造商**: Microchip Technology
    *   **架构**: 哈佛架构, RISC
    *   **特点**: 指令数量少且长度固定，入门简单，包含8/16/32位变体，深受业余爱好者喜爱。

*   **树莓派 (Raspberry Pi)**:
    *   **定位**: 更接近于一个**单板计算机 (Single-Board Computer)** 而非微控制器。
    *   **特点**: 运行操作系统（如Raspbian），使用ARM Cortex核心的博通SoC，功能强大，主要面向教育和开发领域。

---

#### **第六部分：本讲总结**

*   **嵌入式系统设计**：涉及在成本、性能、熟悉度等多种因素间的权衡与选择。
*   **微控制器的基本用途**：核心是**信号处理**——接收输入、处理信息、产生输出。
*   **在控制工程中的角色**：微控制器是**控制器**的核心，连接传感器（输入）和执行器（输出）。
*   **执行器 (Actuators)**：用于**产生有用的输出**（数据、光、运动等），向用户或被控系统提供信息或**激励**。
*   **传感器 (Sensors)**：用于**获取有用的输入信息**（温度、速度等），以**通知控制器**系统的当前状态。